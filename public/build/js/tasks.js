!function(){!async function(){try{const n=`/api/tasks?id=${s()}`,o=await fetch(n),a=await o.json();e=a.tasks,t()}catch(e){console.log(e)}}();let e=[];function t(){if(function(){const e=document.querySelector("#tasks-list");for(;e.firstChild;)e.removeChild(e.firstChild)}(),0===e.length){const e=document.querySelector("#tasks-list"),t=document.createElement("LI");return t.textContent="No tasks yet",t.classList.add("no-tasks"),void e.appendChild(t)}const o={0:"New",1:"Completed"};e.forEach(a=>{const c=document.createElement("LI");c.dataset.taskId=a.ID,c.classList.add("task");const d=document.createElement("P");d.textContent=a.TASK;const l=document.createElement("DIV");l.classList.add("options");const i=document.createElement("BUTTON");i.classList.add("status-task"),i.classList.add(`${o[a.STATUS].toLowerCase()}`),i.textContent=o[a.STATUS],i.dataset.statusTask=a.STATUS,i.ondblclick=function(){!function(o){const a="1"===o.STATUS?"0":"1";o.STATUS=a,async function(o){const{ID:a,PROJECT_ID:c,STATUS:d,TASK:l}=o,i=new FormData;i.append("ID",a),i.append("STATUS",d),i.append("TASK",l),i.append("PROJECT_ID",s());try{const s="http://localhost:3000/api/task/update",o=await fetch(s,{method:"POST",body:i}),c=await o.json();"success"===c.response.type&&(n(c.response.message,c.response.type,document.querySelector(".container-new-task")),e=e.map(e=>(e.ID===a&&(e.STATUS=d),e)),t())}catch(e){console.log(e)}}(o)}({...a})};const r=document.createElement("BUTTON");r.classList.add("delete-task"),r.dataset.taskId=a.ID,r.textContent="Delete",l.appendChild(i),l.appendChild(r),c.appendChild(d),c.appendChild(l);document.querySelector("#tasks-list").appendChild(c)})}function n(e,t,n){const s=document.querySelector(".alert");s&&s.remove();const o=document.createElement("DIV");o.classList.add("alert",t),o.textContent=e,n.parentElement.insertBefore(o,n.nextElementSibling),setTimeout(()=>{o.remove()},5e3)}function s(){const e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).id}document.querySelector("#add-task").addEventListener("click",function(){const o=document.createElement("DIV");o.classList.add("modal"),o.innerHTML='\n        <form class="form new-task">\n            <legend>Add a New Task</legend>\n                <div class="field">\n                    <label for="TASK">Task</label>\n                    <input \n                        type="text" \n                        name="TASK" \n                        id="TASK"\n                        placeholder="New Task"\n                    />\n                </div>\n                <div class="options">\n                    <input \n                        type="submit" \n                        value="Add Task" \n                        class="submit-new-task"\n                    />\n                    <button type="button" class="close-modal">Cancel</button>\n                </div>\n        </form>\n        ',setTimeout(()=>{document.querySelector(".form").classList.add("animate")},0),o.addEventListener("click",function(a){if(a.preventDefault(),a.target.classList.contains("close-modal")){document.querySelector(".form").classList.add("close"),setTimeout(()=>{o.remove()},1e3)}a.target.classList.contains("submit-new-task")&&function(){const o=document.querySelector("#TASK").value.trim();if(""===o)return void n("The name task is required","error",document.querySelector(".form legend"));!async function(o){const a=new FormData;a.append("TASK",o),a.append("PROJECT_ID",s());try{const s="http://localhost:3000/api/task",c=await fetch(s,{method:"POST",body:a}),d=await c.json();if(n(d.message,d.type,document.querySelector(".form legend")),"success"===d.type){const n=document.querySelector(".modal");setTimeout(()=>{n.remove()},3e3);const s={ID:String(d.ID),TASK:o,STATUS:"0",PROJECT_ID:d.PROJECT_ID};e=[...e,s],t()}}catch(e){console.log(e)}}(o)}()}),document.querySelector(".dashboard").appendChild(o)})}();