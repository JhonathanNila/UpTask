!function(){!async function(){try{const n=`/api/tasks?id=${s()}`,a=await fetch(n),o=await a.json();e=o.tasks,t()}catch(e){console.log(e)}}();let e=[];function t(){if(function(){const e=document.querySelector("#tasks-list");for(;e.firstChild;)e.removeChild(e.firstChild)}(),0===e.length){const e=document.querySelector("#tasks-list"),t=document.createElement("LI");return t.textContent="No tasks yet",t.classList.add("no-tasks"),void e.appendChild(t)}const t={0:"New",1:"Completed"};e.forEach(e=>{const n=document.createElement("LI");n.dataset.taskId=e.ID,n.classList.add("task");const s=document.createElement("P");s.textContent=e.TASK;const a=document.createElement("DIV");a.classList.add("options");const o=document.createElement("BUTTON");o.classList.add("status-task"),o.classList.add(`${t[e.STATUS].toLowerCase()}`),o.textContent=t[e.STATUS],o.dataset.statusTask=e.STATUS;const c=document.createElement("BUTTON");c.classList.add("delete-task"),c.dataset.taskId=e.ID,c.textContent="Delete",a.appendChild(o),a.appendChild(c),n.appendChild(s),n.appendChild(a);document.querySelector("#tasks-list").appendChild(n)})}function n(e,t,n){const s=document.querySelector(".alert");s&&s.remove();const a=document.createElement("DIV");a.classList.add("alert",t),a.textContent=e,n.parentElement.insertBefore(a,n.nextElementSibling),setTimeout(()=>{a.remove()},5e3)}function s(){const e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).id}document.querySelector("#add-task").addEventListener("click",function(){const a=document.createElement("DIV");a.classList.add("modal"),a.innerHTML='\n        <form class="form new-task">\n            <legend>Add a New Task</legend>\n                <div class="field">\n                    <label for="TASK">Task</label>\n                    <input \n                        type="text" \n                        name="TASK" \n                        id="TASK"\n                        placeholder="New Task"\n                    />\n                </div>\n                <div class="options">\n                    <input \n                        type="submit" \n                        value="Add Task" \n                        class="submit-new-task"\n                    />\n                    <button type="button" class="close-modal">Cancel</button>\n                </div>\n        </form>\n        ',setTimeout(()=>{document.querySelector(".form").classList.add("animate")},0),a.addEventListener("click",function(o){if(o.preventDefault(),o.target.classList.contains("close-modal")){document.querySelector(".form").classList.add("close"),setTimeout(()=>{a.remove()},1e3)}o.target.classList.contains("submit-new-task")&&function(){const a=document.querySelector("#TASK").value.trim();if(""===a)return void n("The name task is required","error",document.querySelector(".form legend"));!async function(a){const o=new FormData;o.append("TASK",a),o.append("PROJECT_ID",s());try{const s="http://localhost:3000/api/task",c=await fetch(s,{method:"POST",body:o}),d=await c.json();if(n(d.message,d.type,document.querySelector(".form legend")),"success"===d.type){const n=document.querySelector(".modal");setTimeout(()=>{n.remove()},3e3);const s={ID:String(d.ID),TASK:a,STATUS:"0",PROJECT_ID:d.PROJECT_ID};e=[...e,s],t()}}catch(e){console.log(e)}}(a)}()}),document.querySelector(".dashboard").appendChild(a)})}();